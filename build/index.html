<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Thomas Lehmann &lt;thomas.lehmann.private@gmail.com" name="author"/>
<link href="https://thomas-lehmann-private.github.io/hyperion/build/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Build - Hyperion</title>
<link href="../css/bootstrap.min.css" rel="stylesheet"/>
<link href="../css/font-awesome.min.css" rel="stylesheet"/>
<link href="../css/base.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css" rel="stylesheet"/>
<script defer="" src="../js/jquery-1.10.2.min.js"></script>
<script defer="" src="../js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
<div class="container">
<a class="navbar-brand" href="..">Hyperion</a>
<!-- Expander button -->
<button class="navbar-toggler" data-target="#navbar-collapse" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<!-- Expanded navigation -->
<div class="navbar-collapse collapse" id="navbar-collapse">
<!-- Main navigation -->
<ul class="nav navbar-nav">
<li class="navitem">
<a class="nav-link" href="..">Home</a>
</li>
<li class="dropdown">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">User Guide <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../hyperion/">Application</a>
</li>
<li>
<a class="dropdown-item" href="../taskgroup/">Taskgroup</a>
</li>
<li>
<a class="dropdown-item" href="../groovy/">Groovy task</a>
</li>
<li>
<a class="dropdown-item" href="../shell/">Shell task</a>
</li>
<li>
<a class="dropdown-item" href="../docker-container/">Docker container task</a>
</li>
<li>
<a class="dropdown-item" href="../templating/">Templating</a>
</li>
<li>
<a class="dropdown-item" href="../matrix/">Matrix</a>
</li>
</ul>
</li>
<li class="dropdown active">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Developer Guide <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../requirements/">Requirements</a>
</li>
<li>
<a class="dropdown-item active" href="./">Build</a>
</li>
<li>
<a class="dropdown-item" href="../junit5/">JUnit5</a>
</li>
<li>
<a class="dropdown-item" href="../mkdocs/">Mkdocs</a>
</li>
<li>
<a class="dropdown-item" href="../cli/">CLI</a>
</li>
</ul>
</li>
</ul>
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" data-target="#mkdocs_search_modal" data-toggle="modal" href="#">
<i class="fa fa-search"></i> Search
                            </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../requirements/" rel="prev">
<i class="fa fa-arrow-left"></i> Previous
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../junit5/" rel="next">
                                    Next <i class="fa fa-arrow-right"></i>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://github.com/thomas-lehmann-private/hyperion/edit/master/docs/build.md"><i class="fa fa-github"></i> Edit on GitHub</a>
</li>
</ul>
</div>
</div>
</div>
<div class="container">
<div class="row">
<div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
<div class="navbar-header">
<button class="navbar-toggler collapsed" data-target="#toc-collapse" data-toggle="collapse" title="Table of Contents" type="button">
<span class="fa fa-angle-down"></span>
</button>
</div>
<div class="navbar-collapse collapse card bg-secondary" id="toc-collapse">
<ul class="nav flex-column">
<li class="nav-item" data-level="1"><a class="nav-link" href="#build">Build</a>
<ul class="nav flex-column">
<li class="nav-item" data-level="2"><a class="nav-link" href="#quick-and-easy">Quick and easy</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#maven-profiles">Maven Profiles</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#default-goals">Default goals</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#maven-dependencies">Maven Dependencies</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#github-actions">Github actions</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#jenkins">Jenkins</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#how-to-handle-things">How to handle things</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#interesting-links">Interesting Links</a>
<ul class="nav flex-column">
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div></div>
<div class="col-md-9" role="main">
<h1 id="build">Build</h1>
<h2 id="quick-and-easy">Quick and easy</h2>
<p>The build is organized with Maven. You don't have to install Maven because <strong>Maven Wrapper</strong>
(<a href="https://github.com/takari/maven-wrapper">https://github.com/takari/maven-wrapper</a>) is used. On any system following command is sufficient
as long as Java is given (<strong>minimum Version</strong>: 11):</p>
<pre><code>./mvnw
</code></pre>
<p>On Unix based systems this is the exact filename of the script that is executed. On Windows it's the
<strong>mvnw.cmd</strong> script (anyway you do not have to specify the extension that's why it looks
and feel identical on all systems).</p>
<h2 id="maven-profiles">Maven Profiles</h2>
<p>There are two profiles; one for Windows and one for Unix based systems. The main reason for
two profiles is that the code coverage is different since not every test can be executed on
every system (example: The UnixShellTaskTest can run on Unix based systems only). The reason
to use a profile in general is to be able to define default goals, so you do not have
to specify them on command line each time (convenience reason).</p>
<h2 id="default-goals">Default goals</h2>
<p>The default goals are:</p>
<pre><code>clean package javadoc:jar verify
</code></pre>
<ul>
<li><strong>clean</strong> - removes the target folder</li>
<li><strong>package</strong> - includes all previous goals like resource filtering, compiling and running tests.
   The package is combining the concrete jar with all dependencies into one jar that allows to
   use it standalone.</li>
<li><strong>javadoc:jar</strong> - generate the Javadoc HTML documentation and the javadoc jar.</li>
<li><strong>verify</strong> - is running all static code analysis (including the analysis of the code coverage).</li>
</ul>
<h2 id="maven-dependencies">Maven Dependencies</h2>
<h3 id="test-dependencies">Test dependencies</h3>
<p>Those dependencies are available only while testing.</p>
<table>
<thead>
<tr>
<th>Dependency</th>
<th>Homepage</th>
<th>License</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>org.junit.jupiter:junit-jupiter-api:5.5.2</td>
<td><a href="https://junit.org/junit5/">https://junit.org/junit5/</a></td>
<td><a href="https://github.com/junit-team/junit5/blob/main/LICENSE.md">Eclipse Public License - v 2.0</a></td>
<td>Unittests</td>
</tr>
<tr>
<td>org.junit.jupiter:junit-jupiter-engine:5.5.2</td>
<td><a href="https://junit.org/junit5/">https://junit.org/junit5/</a></td>
<td><a href="https://github.com/junit-team/junit5/blob/main/LICENSE.md">Eclipse Public License - v 2.0</a></td>
<td>Unittests</td>
</tr>
<tr>
<td>org.junit.jupiter:junit-jupiter-params:5.5.2</td>
<td><a href="https://junit.org/junit5/">https://junit.org/junit5/</a></td>
<td><a href="https://github.com/junit-team/junit5/blob/main/LICENSE.md">Eclipse Public License - v 2.0</a></td>
<td>Unittests</td>
</tr>
</tbody>
</table>
<h3 id="runtime-dependencies">Runtime dependencies</h3>
<p>Those dependencies are required at runtime and taken by the Maven shade plugin when packaging.</p>
<table>
<thead>
<tr>
<th>Dependency</th>
<th>Homepage</th>
<th>License</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.12.1</td>
<td><a href="https://github.com/FasterXML/jackson">https://github.com/FasterXML/jackson</a></td>
<td><a href="http://www.apache.org/licenses/LICENSE-2.0.txt">Eclipse Public License 2.0</a></td>
<td>Reading YAML files</td>
</tr>
<tr>
<td>ch.qos.logback:logback-classic:1.2.3</td>
<td><a href="http://logback.qos.ch/">http://logback.qos.ch/</a></td>
<td><a href="http://logback.qos.ch/license.html">Logback License</a></td>
<td>Logging</td>
</tr>
<tr>
<td>org.apache.commons:commons-lang3:3.12:0</td>
<td><a href="https://commons.apache.org/proper/commons-lang/">https://commons.apache.org/proper/commons-lang/</a></td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a></td>
<td>Tool classes</td>
</tr>
<tr>
<td>io.pebbletemplates:pebble:3.1.5</td>
<td><a href="https://pebbletemplates.io/">https://pebbletemplates.io/</a></td>
<td><a href="https://github.com/PebbleTemplates/pebble/blob/master/LICENSE">Pebble License</a></td>
<td>Template Engine</td>
</tr>
<tr>
<td>org.codehaus.groovy:groovy:3.0.7</td>
<td><a href="http://www.groovy-lang.org/">http://www.groovy-lang.org/</a></td>
<td><a href="https://github.com/apache/groovy/blob/master/LICENSE">Apache 2.0 License</a></td>
<td>Embedded Language for GroovyTask</td>
</tr>
</tbody>
</table>
<h3 id="build-dependencies">Build dependencies</h3>
<p>Those dependencies are required while building only.</p>
<table>
<thead>
<tr>
<th>Dependency</th>
<th>Homepage</th>
<th>License</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>pl.project13.maven:git-commit-id-plugin:4.0.0</td>
<td><a href="https://github.com/git-commit-id/git-commit-id-maven-plugin">https://github.com/git-commit-id/git-commit-id-maven-plugin</a></td>
<td><a href="https://github.com/git-commit-id/git-commit-id-maven-plugin/blob/master/LICENSE">LGPL-3.0 License</a></td>
<td>Providing Git Information for resource filtering</td>
</tr>
<tr>
<td>org.apache.maven.plugins:maven-compiler-plugin:3.8.0</td>
<td><a href="https://maven.apache.org/plugins/maven-compiler-plugin/">https://maven.apache.org/plugins/maven-compiler-plugin/</a></td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License. 2.0</a></td>
<td>Compiling Java code</td>
</tr>
<tr>
<td>org.apache.maven.plugins:maven-surefire-plugin:3.0.0-M5</td>
<td><a href="https://maven.apache.org/surefire/maven-surefire-plugin/">https://maven.apache.org/surefire/maven-surefire-plugin/</a></td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License. 2.0</a></td>
<td>Running tests</td>
</tr>
<tr>
<td>org.jacoco:jacoco-maven-plugin:0.8.6</td>
<td><a href="https://www.jacoco.org/jacoco/trunk/doc/maven.html">https://www.jacoco.org/jacoco/trunk/doc/maven.html</a></td>
<td><a href="https://www.jacoco.org/jacoco/trunk/doc/license.html">EPL 2.0</a></td>
<td>Code coverage analysis</td>
</tr>
<tr>
<td>org.apache.maven.plugins:maven-checkstyle-plugin:3.1.2</td>
<td><a href="https://maven.apache.org/plugins/maven-checkstyle-plugin/">https://maven.apache.org/plugins/maven-checkstyle-plugin/</a></td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License. 2.0</a></td>
<td>Static coded analysis</td>
</tr>
<tr>
<td>com.github.spotbugs:spotbugs-maven-plugin:4.1.3</td>
<td><a href="https://spotbugs.github.io/spotbugs-maven-plugin/">https://spotbugs.github.io/spotbugs-maven-plugin/</a></td>
<td><a href="https://spotbugs.github.io/spotbugs-maven-plugin/licenses.html">Apache License, 2.0</a></td>
<td>Static coded analysis</td>
</tr>
<tr>
<td>org.apache.maven.plugins:maven-pmd-plugin:3.14.0</td>
<td><a href="https://maven.apache.org/plugins/maven-dependency-plugin/">https://maven.apache.org/plugins/maven-dependency-plugin/</a></td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License. 2.0</a></td>
<td>Static code analysis</td>
</tr>
<tr>
<td>org.apache.maven.plugins:maven-shade-plugin:3.2.4</td>
<td><a href="https://maven.apache.org/plugins/maven-shade-plugin/">https://maven.apache.org/plugins/maven-shade-plugin/</a></td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License. 2.0</a></td>
<td>All in one jar generator</td>
</tr>
<tr>
<td>org.apache.maven.plugins:maven-javadoc-plugin:3.2.0</td>
<td><a href="http://maven.apache.org/plugins/maven-javadoc-plugin/">http://maven.apache.org/plugins/maven-javadoc-plugin/</a></td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License. 2.0</a></td>
<td>API Documentation tool</td>
</tr>
<tr>
<td>org.apache.maven.plugins:maven-dependency-plugin:3.1.2</td>
<td><a href="https://maven.apache.org/plugins/maven-dependency-plugin/">https://maven.apache.org/plugins/maven-dependency-plugin/</a></td>
<td><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License. 2.0</a></td>
<td>Maven dependencies tool</td>
</tr>
</tbody>
</table>
<h3 id="test-configuration">Test configuration</h3>
<p>The configuration of the <strong>surefire</strong> Maven plugin is the scope here:</p>
<ul>
<li>The configuration option <code>&lt;runOrder&gt;random&lt;/runOrder&gt;</code> ensures that tests classes
   are running in random order.</li>
<li>There is another very special configuration I don't like much but found it somewhere
   on the internet to handle the output on Console as well as the XML. They Junit5 guys
   did somehow a break in the format of the JUnit XML and you have to configure that
   it somehow works for current tools. Please don't ask me for details. Simply copy
   the configuration or leave it or find another solution on internet (I doubt you find
   much more than I habe found).</li>
</ul>
<h2 id="github-actions">Github actions</h2>
<p>It's surprisingly easy to organize a build for all three platforms and multiple Java versions
with Github actions. The build is written in YAML format and is called <strong>workflow</strong>. Workflows
have to be located at .github/workflows. The workflow for Hyperion is in the file
<strong>.github/workflows/hyperion-build-actions.yml</strong>. Each time you push your changes remote the
workflow automatically starts. The success is then visible by an success/failure icon on each
location where the commit is shown. The history for all actions (including the currently running
one) you can find here: <a href="https://github.com/thomas-lehmann-private/hyperion/actions">https://github.com/thomas-lehmann-private/hyperion/actions</a>.</p>
<p>The file is really simple and the Github actions in general have good documentation.
For the code coverage the usage is well documentated by the integration itself.
The whole build is organized via a matrix build. All combinations of the values of the
existing lists define one build job. When something goes wrong you can read the logs online
at the individual build.</p>
<p><strong>Please note</strong>: The <strong>--batch-mode</strong> is really important to reduce the verbose output of the
download operation for each single artefact.</p>
<h2 id="jenkins">Jenkins</h2>
<p>You also can run your project locally via Jenkins. You simply create a pipelineline
specifying the file url to your local repository. You shoudl have some plugins installed
like <strong>Jacoco</strong>, <strong>Javadoc</strong>, <strong>AnsiColor</strong>, <strong>Built Timeout</strong>, <strong>Green Balls</strong> and
<strong>Workspace Cleanup</strong>. The Jenkins job presents you out-of-the-box trend graphs for
your tests, the code coverage and the static code analyses. Very awesome. The
<strong>Jenkinsfile</strong> (default when you create a pipeline job) is given in the repository.
I hope you agree: It's a small file.</p>
<h2 id="how-to-handle-things">How to handle things</h2>
<ul>
<li>In general violations will break the build, and the common expectation is that issues are correctly resolved.</li>
<li>When a Jacoco error is raised it does mean that you have added coded without testing it.
   Decreasing the limit is not acceptable.</li>
<li>When your code coverage does get better please increase those limits.</li>
<li>When <strong>Checkstyle</strong>, <strong>PMD</strong> or <strong>Spotbug</strong> raise an error for src/main/java the expectation
   is to fix it without any suppression in 99% of all cases. For the 1% where you think you have to
   suppress it the reason has to be well documented.</li>
<li>For some sort of error like magic numbers or repeated string literals happening in Unittests it's
   mostly ok when you use suppression.</li>
<li>It should never happen that the code is overwhelmed with suppression.</li>
</ul>
<h2 id="interesting-links">Interesting Links</h2>
<ul>
<li><a href="https://docs.github.com/en/actions">https://docs.github.com/en/actions</a></li>
<li><a href="https://github.com/actions/virtual-environments">https://github.com/actions/virtual-environments</a></li>
<li><a href="https://www.jenkins.io/doc/book/pipeline/syntax">https://www.jenkins.io/doc/book/pipeline/syntax</a></li>
<li><a href="https://github.com/takari/maven-wrapper">https://github.com/takari/maven-wrapper</a></li>
<li><a href="https://docs.github.com/en/actions/guides">https://docs.github.com/en/actions/guides</a></li>
<li><a href="https://github.com/marketplace/actions/deploy-to-github-pages">https://github.com/marketplace/actions/deploy-to-github-pages</a></li>
</ul></div>
</div>
</div>
<footer class="col-md-12">
<hr/>
<p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
</footer>
<script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
<script defer="" src="../js/base.js"></script>
<script defer="" src="../search/main.js"></script>
<div aria-hidden="true" aria-labelledby="searchModalLabel" class="modal" id="mkdocs_search_modal" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="searchModalLabel">Search</h4>
<button class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
</div>
<div class="modal-body">
<p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
<form>
<div class="form-group">
<input class="form-control" id="mkdocs-search-query" placeholder="Search..." title="Type search term here" type="search"/>
</div>
</form>
<div id="mkdocs-search-results"></div>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div><div aria-hidden="true" aria-labelledby="keyboardModalLabel" class="modal" id="mkdocs_keyboard_modal" role="dialog" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
<button class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
</div>
<div class="modal-body">
<table class="table">
<thead>
<tr>
<th style="width: 20%;">Keys</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="help shortcut"><kbd>?</kbd></td>
<td>Open this help</td>
</tr>
<tr>
<td class="next shortcut"><kbd>n</kbd></td>
<td>Next page</td>
</tr>
<tr>
<td class="prev shortcut"><kbd>p</kbd></td>
<td>Previous page</td>
</tr>
<tr>
<td class="search shortcut"><kbd>s</kbd></td>
<td>Search</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
</body>
</html>
