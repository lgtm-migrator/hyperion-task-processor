<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Thomas Lehmann &lt;thomas.lehmann.private@gmail.com" name="author"/>
<link href="https://thomas-lehmann-private.github.io/hyperion/docker-image/" rel="canonical"/>
<link href="../img/favicon.ico" rel="shortcut icon"/>
<title>Docker image task - Hyperion</title>
<link href="../css/bootstrap.min.css" rel="stylesheet"/>
<link href="../css/font-awesome.min.css" rel="stylesheet"/>
<link href="../css/base.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/docco.min.css" rel="stylesheet"/>
<script defer="" src="../js/jquery-1.10.2.min.js"></script>
<script defer="" src="../js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
<div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
<div class="container">
<a class="navbar-brand" href="..">Hyperion</a>
<!-- Expander button -->
<button class="navbar-toggler" data-target="#navbar-collapse" data-toggle="collapse" type="button">
<span class="navbar-toggler-icon"></span>
</button>
<!-- Expanded navigation -->
<div class="navbar-collapse collapse" id="navbar-collapse">
<!-- Main navigation -->
<ul class="nav navbar-nav">
<li class="navitem">
<a class="nav-link" href="..">Home</a>
</li>
<li class="dropdown active">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">User Guide <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../hyperion/">Application</a>
</li>
<li>
<a class="dropdown-item" href="../taskgroup/">Taskgroup</a>
</li>
<li>
<a class="dropdown-item" href="../basic-coded-task-features/">Basic code tasks</a>
</li>
<li>
<a class="dropdown-item" href="../groovy/">Groovy task</a>
</li>
<li>
<a class="dropdown-item" href="../powershell/">Powershell task</a>
</li>
<li>
<a class="dropdown-item" href="../windows-batch/">Windows Batch task</a>
</li>
<li>
<a class="dropdown-item" href="../shell/">Shell task</a>
</li>
<li>
<a class="dropdown-item active" href="./">Docker image task</a>
</li>
<li>
<a class="dropdown-item" href="../docker-container/">Docker container task</a>
</li>
<li>
<a class="dropdown-item" href="../templating/">Templating</a>
</li>
<li>
<a class="dropdown-item" href="../matrix/">Matrix</a>
</li>
</ul>
</li>
<li class="dropdown">
<a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Developer Guide <b class="caret"></b></a>
<ul class="dropdown-menu">
<li>
<a class="dropdown-item" href="../requirements/">Requirements</a>
</li>
<li>
<a class="dropdown-item" href="../build/">Build</a>
</li>
<li>
<a class="dropdown-item" href="../junit5/">JUnit5</a>
</li>
<li>
<a class="dropdown-item" href="../mkdocs/">Mkdocs</a>
</li>
<li>
<a class="dropdown-item" href="../cli/">CLI</a>
</li>
</ul>
</li>
</ul>
<ul class="nav navbar-nav ml-auto">
<li class="nav-item">
<a class="nav-link" data-target="#mkdocs_search_modal" data-toggle="modal" href="#">
<i class="fa fa-search"></i> Search
                            </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../shell/" rel="prev">
<i class="fa fa-arrow-left"></i> Previous
                                </a>
</li>
<li class="nav-item">
<a class="nav-link" href="../docker-container/" rel="next">
                                    Next <i class="fa fa-arrow-right"></i>
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="https://github.com/thomas-lehmann-private/hyperion/edit/master/docs/docker-image.md"><i class="fa fa-github"></i> Edit on GitHub</a>
</li>
</ul>
</div>
</div>
</div>
<div class="container">
<div class="row">
<div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
<div class="navbar-header">
<button class="navbar-toggler collapsed" data-target="#toc-collapse" data-toggle="collapse" title="Table of Contents" type="button">
<span class="fa fa-angle-down"></span>
</button>
</div>
<div class="navbar-collapse collapse card bg-secondary" id="toc-collapse">
<ul class="nav flex-column">
<li class="nav-item" data-level="1"><a class="nav-link" href="#docker-image-task">Docker image task</a>
<ul class="nav flex-column">
<li class="nav-item" data-level="2"><a class="nav-link" href="#the-basic-coded-task-features">The basic coded task features</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#the-minimal-example">The minimal example</a>
<ul class="nav flex-column">
</ul>
</li>
<li class="nav-item" data-level="2"><a class="nav-link" href="#external-documentation">External Documentation</a>
<ul class="nav flex-column">
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div></div>
<div class="col-md-9" role="main">
<h1 id="docker-image-task">Docker image task</h1>
<p>This doesn't intend to explain Docker. Please refer to official Docker
documentation for details on it. It's about the Docker container task.</p>
<p>However a few things to mention here:</p>
<ul>
<li>Docker is an external tool that must exist otherwise you cannot
  use the task; even more the Hyperion tool will throw an error
  when the Docker tool has not been found.</li>
<li>The default is to run create Unix images. On Windows you are
  able to switch to Windows platform so you could run Windows batch code inside
  the Docker container that does prepare the image. Usually you can switch to either
  use the one platform or the other platform but not both at same time. From documentation, it seems an
  experimental feature that can be turned on allowing you to specify the
  parameter <strong>--platform</strong> with the values <strong>windows</strong> or <strong>unix</strong> so you could
  use both at same time. Since it is experimental and I cannot rely on yet that this
  is turned on by default I don't generate that parameter; means you cannot
  use both at same time for now.</li>
</ul>
<h2 id="the-basic-coded-task-features">The basic coded task features</h2>
<p>Following features are basic task features:</p>
<ul>
<li>variable</li>
<li>templating (model, matrix variables, task group variables)</li>
<li>tagging</li>
</ul>
<p>Those features are documented in <a href="../basic-coded-task-features/">basic coded task features</a>,</p>
<h2 id="the-minimal-example">The minimal example</h2>
<p>It doesn't differ much from other task. Following details:</p>
<ul>
<li>The attribute <strong>repository-tag</strong> defines the <strong>repository</strong> and <strong>tag</strong> of
   the image when the build of the image has been successful.</li>
<li>The following code also can be found in the <strong>example</strong> folder.
   The batch <strong>hello-world-docker-image-for-unix.cmd</strong> demonstrates what the
   Hyperion tool is basically doing.</li>
<li>The <strong>code</strong> also can reference a path and filename of an existing Dockerfile.</li>
</ul>
<pre><code class="yaml">---
taskgroups:
  - title: test
    parallel: false
    tasks:
      - type: docker-image
        repository-tag: hello-world:latest
        code: |
          FROM centos:latest
          COPY hello-world.sh .
      - type: docker-container
        title: a simple example
        code: /hello-world.sh
        image-name: hello-world
</code></pre>
<h2 id="external-documentation">External Documentation</h2>
<ul>
<li><a href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></li>
<li><a href="https://docs.docker.com/engine/reference/commandline/tag/">https://docs.docker.com/engine/reference/commandline/tag/</a></li>
</ul></div>
</div>
</div>
<footer class="col-md-12">
<hr/>
<p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
</footer>
<script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
<script defer="" src="../js/base.js"></script>
<script defer="" src="../search/main.js"></script>
<div aria-hidden="true" aria-labelledby="searchModalLabel" class="modal" id="mkdocs_search_modal" role="dialog" tabindex="-1">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="searchModalLabel">Search</h4>
<button class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
</div>
<div class="modal-body">
<p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
<form>
<div class="form-group">
<input class="form-control" id="mkdocs-search-query" placeholder="Search..." title="Type search term here" type="search"/>
</div>
</form>
<div id="mkdocs-search-results"></div>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div><div aria-hidden="true" aria-labelledby="keyboardModalLabel" class="modal" id="mkdocs_keyboard_modal" role="dialog" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
<button class="close" data-dismiss="modal" type="button"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>
</div>
<div class="modal-body">
<table class="table">
<thead>
<tr>
<th style="width: 20%;">Keys</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td class="help shortcut"><kbd>?</kbd></td>
<td>Open this help</td>
</tr>
<tr>
<td class="next shortcut"><kbd>n</kbd></td>
<td>Next page</td>
</tr>
<tr>
<td class="prev shortcut"><kbd>p</kbd></td>
<td>Previous page</td>
</tr>
<tr>
<td class="search shortcut"><kbd>s</kbd></td>
<td>Search</td>
</tr>
</tbody>
</table>
</div>
<div class="modal-footer">
</div>
</div>
</div>
</div>
</body>
</html>
